# SMS â†’ LMS ì „í™˜ ì‘ì—… ì™„ë£Œ ë³´ê³ ì„œ

## ğŸ“… ì‘ì—… ì¼ì‹œ
**2025-10-29**

---

## âœ… ì‘ì—… ì™„ë£Œ ë‚´ì—­

### ë³€ê²½ëœ íŒŒì¼ (3ê°œ)

1. **`src/app/api/send-sms/route.ts`**
   - URL: `/sender/sms` â†’ `/sender/mms` âœ…
   - ì¶”ê°€: `title: "ë¬´ì§€ê°œê½ƒ ì•Œë¦¼"` âœ…
   - ê¸€ì ì œí•œ: 45ì â†’ 1,000ì âœ…

2. **`src/app/api/send-delivery-sms/route.ts`**
   - URL: `/sender/sms` â†’ `/sender/mms` âœ…
   - ì¶”ê°€: `title: "ë°°ì†¡ ì™„ë£Œ ì•ˆë‚´"` âœ…
   - ê¸€ì ì œí•œ: 45ì â†’ 1,000ì âœ…

3. **`src/app/api/sms/send/route.ts`**
   - URL: `/sender/sms` â†’ `/sender/mms` âœ…
   - ì¶”ê°€: `title: "ë¬´ì§€ê°œê½ƒ ì•Œë¦¼"` âœ…
   - ì•Œë¦¬ê³  API ë°±ì—… ë¡œì§ ì œê±° âœ…
   - ê¸€ì ì œí•œ: 45ì â†’ 1,000ì âœ…

---

## ğŸ“Š ë³€ê²½ ì „/í›„ ë¹„êµ

### ë³€ê²½ ì „ (SMS - ë‹¨ë¬¸)
```typescript
POST https://api-sms.cloud.toast.com/sms/v3.0/appKeys/{appKey}/sender/sms

{
  "body": "ë©”ì‹œì§€ ë‚´ìš© (ìµœëŒ€ í•œê¸€ 45ì)",
  "sendNo": "ë°œì‹ ë²ˆí˜¸",
  "recipientList": [...]
}
```

### ë³€ê²½ í›„ (LMS - ì¥ë¬¸)
```typescript
POST https://api-sms.cloud.toast.com/sms/v3.0/appKeys/{appKey}/sender/mms

{
  "title": "ë¬´ì§€ê°œê½ƒ ì•Œë¦¼",              // âœ¨ ì¶”ê°€
  "body": "ë©”ì‹œì§€ ë‚´ìš© (ìµœëŒ€ í•œê¸€ 1,000ì)", // âœ¨ ì œí•œ ì™„í™”
  "sendNo": "ë°œì‹ ë²ˆí˜¸",
  "recipientList": [...]
}
```

---

## ğŸ¯ í•´ê²°ëœ ë¬¸ì œ

### 1. ë©”ì‹œì§€ ì˜ë¦¼ í˜„ìƒ í•´ê²°
- **ë¬¸ì œ**: SMS ë‹¨ë¬¸ ì‚¬ìš©ìœ¼ë¡œ 45ì(í•œê¸€ ê¸°ì¤€) ì´ˆê³¼ ì‹œ ë©”ì‹œì§€ ì˜ë¦¼
- **í•´ê²°**: LMS ì¥ë¬¸ìœ¼ë¡œ ì „í™˜í•˜ì—¬ 1,000ì(í•œê¸€ ê¸°ì¤€)ê¹Œì§€ ë°œì†¡ ê°€ëŠ¥

### 2. ì•Œë¦¬ê³  ì˜ì¡´ì„± ì œê±°
- **ë¬¸ì œ**: ì•Œë¦¬ê³  API ë°±ì—… ë¡œì§ìœ¼ë¡œ ì½”ë“œ ë³µì¡ë„ ì¦ê°€
- **í•´ê²°**: NHN Cloudë§Œ ì‚¬ìš©í•˜ë„ë¡ ë‹¨ìˆœí™”

### 3. API ì¼ê´€ì„± í™•ë³´
- **ë¬¸ì œ**: 3ê°œ íŒŒì¼ì—ì„œ ê°ê° ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ SMS ë°œì†¡
- **í•´ê²°**: ëª¨ë‘ NHN Cloud LMSë¡œ í†µì¼

---

## ğŸ“ˆ ì˜ˆìƒ íš¨ê³¼

| í•­ëª© | ê°œì„  ì „ | ê°œì„  í›„ | íš¨ê³¼ |
|-----|---------|---------|------|
| **ê¸€ì ìˆ˜ ì œí•œ** | í•œê¸€ 45ì | í•œê¸€ 1,000ì | **22ë°° ì¦ê°€** âœ… |
| **ë©”ì‹œì§€ ì˜ë¦¼** | ë°œìƒ ì¤‘ | í•´ê²° | **ê³ ê° ë¶ˆí¸ í•´ì†Œ** âœ… |
| **API ì˜ì¡´ì„±** | ì•Œë¦¬ê³  + NHN | NHNë§Œ ì‚¬ìš© | **ì½”ë“œ ë‹¨ìˆœí™”** âœ… |
| **ìœ ì§€ë³´ìˆ˜ì„±** | ë³µì¡ | ë‹¨ìˆœ | **ê´€ë¦¬ ìš©ì´** âœ… |

---

## ğŸ”§ í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. í™˜ê²½ ë³€ìˆ˜ í™•ì¸
```bash
# .env.local íŒŒì¼ í™•ì¸
NHN_SMS_APP_KEY=your_app_key
NHN_SMS_SECRET_KEY=your_secret_key
NHN_SMS_SENDER=your_sender_number
```

### 2. í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

#### ì‹œë‚˜ë¦¬ì˜¤ 1: ì£¼ë¬¸ í™•ì¸ SMS (send-sms)
```bash
POST /api/send-sms
{
  "to": "01012345678",
  "body": "[ë¬´ì§€ê°œê½ƒë°°ë‹¬] ì£¼ë¬¸ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.\nì£¼ë¬¸ë²ˆí˜¸: ORD-2025-001\nìƒí’ˆ: ì¥ë¯¸ê½ƒë‹¤ë°œ 50ì†¡ì´\në°°ì†¡ì§€: ì„œìš¸ì‹œ ê°•ë‚¨êµ¬...\nê°ì‚¬í•©ë‹ˆë‹¤."
}
```

#### ì‹œë‚˜ë¦¬ì˜¤ 2: ë°°ì†¡ ì™„ë£Œ SMS (send-delivery-sms)
```bash
POST /api/send-delivery-sms
{
  "orderId": "order_id_here"
}
```

#### ì‹œë‚˜ë¦¬ì˜¤ 3: ì¼ë°˜ SMS (sms/send)
```bash
POST /api/sms/send
{
  "to": "01012345678",
  "message": "ê¸´ ë©”ì‹œì§€ ë‚´ìš© í…ŒìŠ¤íŠ¸..."
}
```

### 3. ì„±ê³µ ì‘ë‹µ í™•ì¸
```json
{
  "header": {
    "isSuccessful": true,
    "resultCode": 0,
    "resultMessage": "SUCCESS"
  },
  "body": {
    "data": {
      "requestId": "20180810100630ReZQ6KZzAH0",
      "statusCode": "2"
    }
  }
}
```

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. ìš”ê¸ˆ ë³€ê²½
- SMS ë‹¨ë¬¸ë³´ë‹¤ LMS ì¥ë¬¸ì´ ì•½ê°„ ë¹„ìŒˆ
- ì •í™•í•œ ìš”ê¸ˆì€ NHN Cloud ì½˜ì†”ì—ì„œ í™•ì¸ í•„ìš”

### 2. ì œëª©(title) í•„ìˆ˜
- LMSëŠ” ì œëª© í•„ë“œê°€ í•„ìˆ˜
- ì œëª© ìµœëŒ€ ê¸¸ì´: í•œê¸€ 20ì (40ë°”ì´íŠ¸)

### 3. ì´ë¯¸ì§€ ì²¨ë¶€ ë¶ˆê°€
- í˜„ì¬ í…ìŠ¤íŠ¸ë§Œ ë°œì†¡ (MMS ì•„ë‹˜)
- ì´ë¯¸ì§€ í•„ìš” ì‹œ `attachFileIdList` ì¶”ê°€ êµ¬í˜„ í•„ìš”

---

## ğŸ”„ ë¡¤ë°± ë°©ë²• (ë¬¸ì œ ë°œìƒ ì‹œ)

### ê¸´ê¸‰ ë¡¤ë°± (3ë¶„ ì†Œìš”)

ê° íŒŒì¼ì—ì„œ 2ê³³ë§Œ ìˆ˜ì •:

```typescript
// 1. URL ë³€ê²½
- '/sender/mms' 
+ '/sender/sms'

// 2. title í•„ë“œ ì œê±°
- title: 'ë¬´ì§€ê°œê½ƒ ì•Œë¦¼',
+ // title ì œê±°
```

### ìƒì„¸ ë¡¤ë°± ì ˆì°¨

1. **íŒŒì¼ 1**: `send-sms/route.ts`
   - Line 14: `mms` â†’ `sms`
   - Line 22: `title: 'ë¬´ì§€ê°œê½ƒ ì•Œë¦¼',` ì‚­ì œ

2. **íŒŒì¼ 2**: `send-delivery-sms/route.ts`
   - Line 30: `mms` â†’ `sms`
   - Line 38: `title: 'ë°°ì†¡ ì™„ë£Œ ì•ˆë‚´',` ì‚­ì œ

3. **íŒŒì¼ 3**: `sms/send/route.ts`
   - Line 29: `mms` â†’ `sms`
   - Line 37: `title: 'ë¬´ì§€ê°œê½ƒ ì•Œë¦¼',` ì‚­ì œ

---

## ğŸ“ ë¬¸ì˜ ë° ì§€ì›

### NHN Cloud ê³µì‹ ë¬¸ì„œ
- API ê°€ì´ë“œ: https://docs.nhncloud.com/ko/Notification/SMS/ko/api-guide/
- ì½˜ì†”: https://console.nhncloud.com

### ë°œê²¬ëœ ì´ìŠˆ ë³´ê³ 
- ë¬¸ì ë°œì†¡ ì‹¤íŒ¨ ì‹œ NHN Cloud ì½˜ì†”ì—ì„œ ìƒì„¸ ë¡œê·¸ í™•ì¸
- ì—ëŸ¬ ì½”ë“œ ì°¸ì¡°: [NHN Cloud SMS ì—ëŸ¬ ì½”ë“œí‘œ]

---

## âœ… ì‘ì—… ê²°ê³¼

**ìƒíƒœ**: âœ… ì™„ë£Œ  
**ì˜í–¥ë„**: ğŸŸ¢ ë‚®ìŒ  
**í…ŒìŠ¤íŠ¸ í•„ìš”**: âš ï¸ í•„ìˆ˜  
**ë°°í¬ ì¤€ë¹„**: âœ… ì™„ë£Œ
